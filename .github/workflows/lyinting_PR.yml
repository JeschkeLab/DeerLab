name: Python PR Linting  
  
on:  
  pull_request:  
    type: [ opened, synchronize ]  
  workflow_dispatch:
  
jobs:  
  ci-linting:  
    runs-on: ubuntu-latest  
    steps:  
      - name: Checkout  
        uses: actions/checkout@v2  
      - name: Filter modified files  
        uses: dorny/paths-filter@v2  
        id: filter  
        with:  
          list-files: shell  
          filters: |  
            py_modified:  
              - added|modified: "./**/*.py"  
      - name: Setup Python  
        if: ${{ steps.filter.outputs.py_modified == 'true' }}  
        uses: actions/setup-python@v2  
        with:  
          python-version: 3.10.0  
          architecture: x64  
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install flake8
          pip install pylint
          python setup.py install
      - name: Run flake8 lynter
        if: ${{ steps.filter.outputs.py_modified == 'true' }}  
        run: |
          flake8 ${{ steps.filter.outputs.py_modified_files }} --count --select=E9,F63,F7,F82 --show-source --statistics
          flake8 ${{ steps.filter.outputs.py_modified_files }} --count --max-complexity=10 --max-line-length=79 --statistics
